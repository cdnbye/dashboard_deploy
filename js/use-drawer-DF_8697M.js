var Be=Object.defineProperty,xe=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var N=(o,t,s)=>t in o?Be(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,f=(o,t)=>{for(var s in t||(t={}))G.call(t,s)&&N(o,s,t[s]);if(L)for(var s of L(t))Q.call(t,s)&&N(o,s,t[s]);return o},M=(o,t)=>xe(o,Oe(t));var A=(o,t)=>{var s={};for(var a in o)G.call(o,a)&&t.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&L)for(var a of L(o))t.indexOf(a)<0&&Q.call(o,a)&&(s[a]=o[a]);return s};var E=(o,t,s)=>N(o,typeof t!="symbol"?t+"":t,s);var q=(o,t,s)=>new Promise((a,l)=>{var r=i=>{try{y(s.next(i))}catch(_){l(_)}},h=i=>{try{y(s.throw(i))}catch(_){l(_)}},y=i=>i.done?a(i.value):Promise.resolve(i.value).then(r,h);y((s=s.apply(o,t)).next())});import{D as Se,E as ne,Z as ke,U as $e,F as Ae,G as Ee,H as Pe,J as Te,S as Ve,K as Fe,L as Re,M as Ie,N as Le,O as Me,P as je,Q as ee,V as Ne,_ as te,W as ze,X as Ke}from"./bootstrap-CL17rep8.js";import{a5 as b,af as c,ak as p,ah as u,ai as m,as as re,at as le,ab as e,T as ie,ag as U,J,w as B,aj as C,ad as H,b4 as D,b3 as O,aD as We,aC as ce,R as Ue,X as Je,al as z,au as P,av as T,ao as se,bk as He,i as Xe,Y as Ze,e as oe,n as Ye}from"../jse/index-index-BG6jV3fR.js";import{X as Ge}from"./x-BMVsyMFc.js";import{V as Qe}from"./loading-DyJFSIH5.js";const qe=Se("fixed z-[1000] bg-background shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 border-border",{defaultVariants:{side:"right"},variants:{side:{bottom:"inset-x-0 bottom-0 border-t border-border data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left ",right:"inset-y-0 right-0 h-full w-3/4 border-l  data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right",top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top"}}}),et=b({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:t}){const l=ne(o,t);return(r,h)=>(c(),p(e(ke),re(le(e(l))),{default:u(()=>[m(r.$slots,"default")]),_:3},16))}}),tt=b({__name:"SheetClose",props:{asChild:{type:Boolean},as:{}},setup(o){const t=o;return(s,a)=>(c(),p(e($e),re(le(t)),{default:u(()=>[m(s.$slots,"default")]),_:3},16))}}),st=["data-dismissable-drawer"],ot=b({__name:"SheetOverlay",setup(o){Ae();const t=ie("DISMISSABLE_DRAWER_ID");return(s,a)=>(c(),U("div",{"data-dismissable-drawer":e(t),class:"bg-overlay fixed inset-0 z-[1000]"},null,8,st))}}),at=b({inheritAttrs:!1,__name:"SheetContent",props:{class:{},modal:{type:Boolean},open:{type:Boolean},side:{},forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:t}){const s=o,a=t,l=J(()=>{const w=s,{class:h,modal:y,open:i,side:_}=w;return A(w,["class","modal","open","side"])}),r=ne(l,a);return(h,y)=>(c(),p(e(Te),null,{default:u(()=>[B(Ee,{name:"fade"},{default:u(()=>[h.open&&h.modal?(c(),p(ot,{key:0})):C("",!0)]),_:1}),B(e(Pe),H({class:e(D)(e(qe)({side:h.side}),"z-[1000]",s.class)},f(f({},e(r)),h.$attrs)),{default:u(()=>[m(h.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),K=b({__name:"SheetDescription",props:{class:{},asChild:{type:Boolean},as:{}},setup(o){const t=o,s=J(()=>{const r=t,{class:a}=r;return A(r,["class"])});return(a,l)=>(c(),p(e(Ve),H({class:e(D)("text-muted-foreground text-sm",t.class)},s.value),{default:u(()=>[m(a.$slots,"default")]),_:3},16,["class"]))}}),nt=b({__name:"SheetFooter",props:{class:{}},setup(o){const t=o;return(s,a)=>(c(),U("div",{class:O(e(D)("flex flex-row flex-col-reverse justify-end gap-x-2",t.class))},[m(s.$slots,"default")],2))}}),rt=b({__name:"SheetHeader",props:{class:{}},setup(o){const t=o;return(s,a)=>(c(),U("div",{class:O(e(D)("flex flex-col text-center sm:text-left",t.class))},[m(s.$slots,"default")],2))}}),W=b({__name:"SheetTitle",props:{class:{},asChild:{type:Boolean},as:{}},setup(o){const t=o,s=J(()=>{const r=t,{class:a}=r;return A(r,["class"])});return(a,l)=>(c(),p(e(Fe),H({class:e(D)("text-foreground font-medium",t.class)},s.value),{default:u(()=>[m(a.$slots,"default")]),_:3},16,["class"]))}}),lt={class:"flex-center"},it=b({__name:"drawer",props:{drawerApi:{default:void 0},cancelText:{},class:{},closable:{type:Boolean},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},footer:{type:Boolean},footerClass:{},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},placement:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},title:{},titleTooltip:{}},setup(o){var R,Y;const t=o,s=Re.getComponents(),a=We();ce("DISMISSABLE_DRAWER_ID",a);const l=Ue(),{$t:r}=Ie(),{isMobile:h}=Le(),y=(Y=(R=t.drawerApi)==null?void 0:R.useStore)==null?void 0:Y.call(R),{cancelText:i,class:_,closable:d,closeOnClickModal:w,closeOnPressEscape:v,confirmLoading:x,confirmText:de,contentClass:pe,description:V,footer:ue,footerClass:fe,header:me,headerClass:he,loading:j,modal:_e,openAutoFocus:ye,placement:S,showCancelButton:we,showConfirmButton:Ce,title:F,titleTooltip:X}=Me(t,y);Je(()=>j.value,n=>{n&&l.value&&l.value.scrollTo({top:0})});function be(n){w.value||n.preventDefault()}function ge(n){v.value||n.preventDefault()}function De(n){const g=n.target,I=g==null?void 0:g.dataset.dismissableDrawer;(!w.value||I!==a)&&n.preventDefault()}function ve(n){ye.value||n==null||n.preventDefault()}function Z(n){n.preventDefault(),n.stopPropagation()}return(n,g)=>{var I;return c(),p(e(et),{modal:!1,open:(I=e(y))==null?void 0:I.isOpen,"onUpdate:open":g[2]||(g[2]=()=>{var k;return(k=n.drawerApi)==null?void 0:k.close()})},{default:u(()=>{var k;return[B(e(at),{class:O(e(D)("flex w-[520px] flex-col",e(_),{"!w-full":e(h)||e(S)==="bottom"||e(S)==="top","max-h-[100vh]":e(S)==="bottom"||e(S)==="top"})),modal:e(_e),open:(k=e(y))==null?void 0:k.isOpen,side:e(S),onCloseAutoFocus:Z,onEscapeKeyDown:ge,onFocusOutside:Z,onInteractOutside:be,onOpenAutoFocus:ve,onPointerDownOutside:De},{default:u(()=>[e(me)?(c(),p(e(rt),{key:0,class:O(e(D)("!flex flex-row items-center justify-between border-b px-6 py-5",e(he),{"px-4 py-3":e(d)}))},{default:u(()=>[z("div",null,[e(F)?(c(),p(e(W),{key:0,class:"text-left"},{default:u(()=>[m(n.$slots,"title",{},()=>[P(T(e(F))+" ",1),e(X)?(c(),p(e(je),{key:0,"trigger-class":"pb-1"},{default:u(()=>[P(T(e(X)),1)]),_:1})):C("",!0)])]),_:3})):C("",!0),e(V)?(c(),p(e(K),{key:1,class:"mt-1 text-xs"},{default:u(()=>[m(n.$slots,"description",{},()=>[P(T(e(V)),1)])]),_:3})):C("",!0)]),!e(F)||!e(V)?(c(),p(e(ee),{key:0},{default:u(()=>[e(F)?C("",!0):(c(),p(e(W),{key:0})),e(V)?C("",!0):(c(),p(e(K),{key:1}))]),_:1})):C("",!0),z("div",lt,[m(n.$slots,"extra"),e(d)?(c(),p(e(tt),{key:0,"as-child":"",class:"data-[state=open]:bg-secondary ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none"},{default:u(()=>[B(e(Ne),null,{default:u(()=>[B(e(Ge),{class:"size-4"})]),_:1})]),_:1})):C("",!0)])]),_:3},8,["class"])):(c(),p(e(ee),{key:1},{default:u(()=>[B(e(W)),B(e(K))]),_:1})),z("div",{ref_key:"wrapperRef",ref:l,class:O(e(D)("relative flex-1 overflow-y-auto p-3",e(pe),{"overflow-hidden":e(j)}))},[e(j)?(c(),p(e(Qe),{key:0,class:"size-full",spinning:""})):C("",!0),m(n.$slots,"default")],2),e(ue)?(c(),p(e(nt),{key:2,class:O(e(D)("w-full flex-row items-center justify-start border-t p-2 px-3",e(fe)))},{default:u(()=>[m(n.$slots,"prepend-footer"),m(n.$slots,"footer",{},()=>[e(we)?(c(),p(se(e(s).DefaultButton||e(te)),{key:0,variant:"ghost",onClick:g[0]||(g[0]=()=>{var $;return($=n.drawerApi)==null?void 0:$.onCancel()})},{default:u(()=>[m(n.$slots,"cancelText",{},()=>[P(T(e(i)||e(r)("cancel")),1)])]),_:3})):C("",!0),e(Ce)?(c(),p(se(e(s).PrimaryButton||e(te)),{key:1,loading:e(x),onClick:g[1]||(g[1]=()=>{var $;return($=n.drawerApi)==null?void 0:$.onConfirm()})},{default:u(()=>[m(n.$slots,"confirmText",{},()=>[P(T(e(de)||e(r)("confirm")),1)])]),_:3},8,["loading"])):C("",!0)]),m(n.$slots,"append-footer")]),_:3},8,["class"])):C("",!0)]),_:3},8,["class","modal","open","side"])]}),_:3},8,["open"])}}});class ct{constructor(t={}){E(this,"api");E(this,"state");E(this,"sharedData",{payload:{}});E(this,"store");const _=t,{connectedComponent:s,onBeforeClose:a,onCancel:l,onConfirm:r,onOpenChange:h}=_,y=A(_,["connectedComponent","onBeforeClose","onCancel","onConfirm","onOpenChange"]),i={class:"",closable:!0,closeOnClickModal:!0,closeOnPressEscape:!0,confirmLoading:!1,contentClass:"",footer:!0,header:!0,isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,placement:"right",showCancelButton:!0,showConfirmButton:!0,title:""};this.store=new ze(f(f({},i),y),{onUpdate:()=>{var w,v,x;const d=this.store.state;(d==null?void 0:d.isOpen)===((w=this.state)==null?void 0:w.isOpen)?this.state=d:(this.state=d,(x=(v=this.api).onOpenChange)==null||x.call(v,!!(d!=null&&d.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:a,onCancel:l,onConfirm:r,onOpenChange:h},He(this)}batchStore(t){this.store.batch(t)}close(){var s,a,l;((l=(a=(s=this.api).onBeforeClose)==null?void 0:a.call(s))!=null?l:!0)&&this.store.setState(r=>M(f({},r),{isOpen:!1}))}getData(){var t,s;return(s=(t=this.sharedData)==null?void 0:t.payload)!=null?s:{}}onCancel(){var t,s;this.api.onCancel?(s=(t=this.api).onCancel)==null||s.call(t):this.close()}onConfirm(){var t,s;(s=(t=this.api).onConfirm)==null||s.call(t)}open(){this.store.setState(t=>M(f({},t),{isOpen:!0}))}setData(t){this.sharedData.payload=t}setState(t){Xe(t)?this.store.setState(t):this.store.setState(s=>f(f({},s),t))}}const ae=Symbol("VBEN_DRAWER_INJECT");function _t(o={}){var y;const{connectedComponent:t}=o;if(t){const i=Ze({});return[b((d,{attrs:w,slots:v})=>(ce(ae,{extendApi(x){Object.setPrototypeOf(i,x)},options:o}),dt(i,f(f(f({},d),w),v)),()=>oe(t,f(f({},d),w),v)),{inheritAttrs:!1,name:"VbenParentDrawer"}),i]}const s=ie(ae,{}),a=f(f({},s.options),o);a.onOpenChange=i=>{var _,d,w;(_=o.onOpenChange)==null||_.call(o,i),(w=(d=s.options)==null?void 0:d.onOpenChange)==null||w.call(d,i)};const l=new ct(a),r=l;r.useStore=i=>Ke(l.store,i);const h=b((i,{attrs:_,slots:d})=>()=>oe(it,M(f(f({},i),_),{drawerApi:r}),d),{inheritAttrs:!1,name:"VbenDrawer"});return(y=s.extendApi)==null||y.call(s,r),[h,r]}function dt(o,t){return q(this,null,function*(){var l;if(!t||Object.keys(t).length===0)return;yield Ye();const s=(l=o==null?void 0:o.store)==null?void 0:l.state;if(!s)return;const a=new Set(Object.keys(s));for(const r of Object.keys(t))a.has(r)&&!["class"].includes(r)&&console.warn(`[Vben Drawer]: When 'connectedComponent' exists, do not set props or slots '${r}', which will increase complexity. If you need to modify the props of Drawer, please use useVbenDrawer or api.`)})}export{_t as u};
