var m=(c,p,i)=>new Promise((d,u)=>{var a=t=>{try{n(i.next(t))}catch(l){u(l)}},s=t=>{try{n(i.throw(t))}catch(l){u(l)}},n=t=>t.done?d(t.value):Promise.resolve(t.value).then(a,s);n((i=i.apply(c,p)).next())});import{w as h,C as v,az as y,$ as e,B as w,x,k as C}from"./bootstrap-DrkGJIrR.js";import{u as $}from"./vxe-table-CtBEIJv9.js";import{_ as S}from"./page.vue_vue_type_script_setup_true_lang-DsfYRoTI.js";import{a5 as k,Y as z,af as B,ak as I,ah as r,ab as o,w as f,au as g,av as _}from"../jse/index-index-C3bEZzmN.js";import{c as T}from"./copy-BgcmNg9B.js";import"./loading-B4I_UEwy.js";import"./form-Bwtu3Hhw.js";import"./RightOutlined-Bhb1z1mK.js";import"./x-BMfoBjs2.js";function V(c){return m(this,null,function*(){const i=h().accessUserId;return v.get(`user/user_id/${i}/invite_records`,{params:c})})}const O=k({__name:"index",setup(c){const p=y(),i=z({columns:[{field:"created_at",title:e("page.invitation.date"),formatter:"formatDateTime",width:200},{field:"from",title:e("page.invitation.from"),width:220},{field:"original_price",title:e("page.invitation.price"),width:150},{field:"currency",title:e("page.order.currency"),width:100},{field:"status",title:e("page.invitation.status"),width:150,slots:{default:"status"}},{field:"amount",title:e("page.invitation.commission"),width:100}],height:"auto",pagerConfig:{},proxyConfig:{ajax:{query:s=>m(this,[s],function*({page:a}){return{items:yield V({page:a.currentPage,page_size:a.pageSize}),total:1e3}})}}}),[d]=$({gridOptions:i});function u(){const a=`${location.origin+location.pathname}#/signup`,s=p.userInfo;if(!s)return;const n=C(),t=`${a}?zone=${n}&inviter=${encodeURIComponent(s.email)}`;T(t)}return(a,s)=>(B(),I(o(S),{description:o(e)("page.invitation.desc"),"auto-content-height":""},{default:r(()=>[f(o(d),null,{"toolbar-actions":r(()=>[f(o(w),{class:"mr-2",type:"primary",onClick:u},{default:r(()=>[g(_(o(e)("page.invitation.copy")),1)]),_:1})]),status:r(()=>[f(o(x),{color:"success"},{default:r(()=>[g(_(o(e)("page.invitation.done")),1)]),_:1})]),_:1})]),_:1},8,["description"]))}});export{O as default};
