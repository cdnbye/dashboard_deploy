var A=(n,s,t)=>new Promise((m,l)=>{var u=e=>{try{a(t.next(e))}catch(o){l(o)}},f=e=>{try{a(t.throw(e))}catch(o){l(o)}},a=e=>e.done?m(e.value):Promise.resolve(e.value).then(u,f);a((t=t.apply(n,s)).next())});import{aE as C,aF as d,aG as U}from"./bootstrap-QC5HPXIW.js";import{f as V}from"./domain-DYNLDaZf.js";import{R as c,bw as b}from"../jse/index-index-C5kN0FgG.js";const x=C("app",()=>{const n=c(),s=c([]),t=c([]);function m(){n.value=void 0,t.value=[],s.value=[],d(void 0)}function l(a){n.value=a,d(a)}function u(a){const e=s.value.find(o=>o.domain===a);n.value=e,d(e)}function f(){return A(this,null,function*(){var v;n.value=U();const[a,e]=yield b(V({page:1,page_size:300}));if(a||!e)return[];let o=!1;for(const i of e)if(i.isValid===1){s.value=e,o=!0;break}let p=!1;if((v=n.value)!=null&&v.domain&&(p=e.some(i=>{var r;return i.domain===((r=n.value)==null?void 0:r.domain)})),o){const i=e.filter(r=>r.isValid===1);return i.sort((r,D)=>{const g=r.domain.split(".").length,h=D.domain.split(".").length;return g!==h?g-h:r.domain.localeCompare(D.domain)}),t.value=i,p||l(i[0]),i}else m();return[]})}return{currentDomain:n,setCurrentDomain:l,$reset:m,setCurrentDomainId:u,domains:s,fetchAllDomainAndAppLogic:f}});export{x as u};
