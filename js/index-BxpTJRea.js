var g=(y,p,r)=>new Promise((m,l)=>{var c=t=>{try{n(r.next(t))}catch(e){l(e)}},f=t=>{try{n(r.throw(t))}catch(e){l(e)}},n=t=>t.done?m(t.value):Promise.resolve(t.value).then(c,f);n((r=r.apply(y,p)).next())});import{$ as V,B as k,t as C,v as b}from"./bootstrap-SKctUie3.js";import{u as B}from"./vxe-table-CfGRJCLB.js";import{g as v,_ as z,d as S}from"./create-drawer.vue_vue_type_script_setup_true_lang-DSVGJVqH.js";import{_ as $}from"./page.vue_vue_type_script_setup_true_lang-Dgq6zLp-.js";import{a5 as A,Y as D,ah as _,ai as s,ab as o,ag as h,n as u,ap as d,aq as x,ar as N,al as w}from"../jse/index-index-0SEuuMhD.js";import{u as T}from"./use-drawer-WeeVlx5E.js";import"./loading-BVj1NiH4.js";import"./form-ufAcWega.js";import"./RightOutlined-BmsLIaO2.js";import"./x-Cpey3BCi.js";const J=A({__name:"index",setup(y){const[p,r]=T({connectedComponent:z}),m=D({checkboxConfig:{highlight:!0,labelField:"name"},columns:[{field:"created_at",title:"申请开票时间",width:180,formatter:"formatDateTime"},{field:"title",title:"发票抬头",minWidth:200},{field:"type",width:200,title:"发票类型",slots:{default:"type"}},{field:"amount",width:100,title:"发票金额"},{field:"status",width:100,title:"状态",slots:{default:"status"}},{field:"operation",title:V("common.operation"),slots:{default:"operation"},width:200}],height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:i=>g(this,[i],function*({page:e}){return{items:yield v({page:e.currentPage,page_size:e.pageSize}),total:1e3}})}}}),[l,c]=B({gridOptions:m});function f(){r.open()}function n(){return g(this,null,function*(){yield c.reload()})}function t(e){S(e.id).then(()=>{b.success({message:"撤销成功"}),c.reload()}).catch(i=>{console.error(i)})}return(e,i)=>(h(),_(o($),{"auto-content-height":"",description:"仅为中国大陆工商认证并且使用人民币在线支付的企业开具发票，开票金额需至少1000元且为整数，消费不足1000元可后续累积足够金额再一次性开具发票。"},{default:s(()=>[u(o(p),{onSuccess:n}),u(o(l),null,{"toolbar-actions":s(()=>[u(o(k),{class:"mr-2",size:"large",type:"primary",onClick:f},{default:s(()=>i[0]||(i[0]=[d(" 申请开票 ")])),_:1})]),status:s(({row:a})=>[u(o(C),{color:a.status===0?"red":"success"},{default:s(()=>[d(x(a.status===0?"开票中":"已开票"),1)]),_:2},1032,["color"])]),type:s(({row:a})=>[N("span",null,x(a.type===0?"普票":"专票"),1)]),operation:s(({row:a})=>[a.status===1?(h(),_(o(C),{key:0,size:"small"},{default:s(()=>i[1]||(i[1]=[d(" 联系客服领取 ")])),_:1})):w("",!0),a.status===0?(h(),_(o(k),{key:1,class:"ml-1",size:"small",type:"link",onClick:q=>t(a)},{default:s(()=>i[2]||(i[2]=[d(" 撤销 ")])),_:2},1032,["onClick"])):w("",!0)]),_:1})]),_:1}))}});export{J as default};
