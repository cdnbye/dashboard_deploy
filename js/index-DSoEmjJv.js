var g=(y,p,r)=>new Promise((m,l)=>{var u=t=>{try{n(r.next(t))}catch(e){l(e)}},f=t=>{try{n(r.throw(t))}catch(e){l(e)}},n=t=>t.done?m(t.value):Promise.resolve(t.value).then(u,f);n((r=r.apply(y,p)).next())});import{$ as V,B as k,x,y as b}from"./bootstrap-CL17rep8.js";import{u as B}from"./vxe-table-7XJ7DyGq.js";import{g as v,_ as z,d as S}from"./create-drawer.vue_vue_type_script_setup_true_lang-DVxVgZy0.js";import{_ as $}from"./page.vue_vue_type_script_setup_true_lang-Bmglc92S.js";import{a5 as A,Y as D,af as _,ak as h,ah as s,ab as o,w as c,au as d,av as C,al as N,aj as w}from"../jse/index-index-BG6jV3fR.js";import{u as T}from"./use-drawer-DF_8697M.js";import"./loading-DyJFSIH5.js";import"./form-DVKcOcK9.js";import"./RightOutlined-C1bagf8s.js";import"./x-BMVsyMFc.js";const J=A({__name:"index",setup(y){const[p,r]=T({connectedComponent:z}),m=D({checkboxConfig:{highlight:!0,labelField:"name"},columns:[{field:"created_at",title:"申请开票时间",width:180,formatter:"formatDateTime"},{field:"title",title:"发票抬头",minWidth:200},{field:"type",width:200,title:"发票类型",slots:{default:"type"}},{field:"amount",width:100,title:"发票金额"},{field:"status",width:100,title:"状态",slots:{default:"status"}},{field:"operation",title:V("common.operation"),slots:{default:"operation"},width:200}],height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:i=>g(this,[i],function*({page:e}){return{items:yield v({page:e.currentPage,page_size:e.pageSize}),total:1e3}})}}}),[l,u]=B({gridOptions:m});function f(){r.open()}function n(){return g(this,null,function*(){yield u.reload()})}function t(e){S(e.id).then(()=>{b.success({message:"撤销成功"}),u.reload()}).catch(i=>{console.error(i)})}return(e,i)=>(_(),h(o($),{"auto-content-height":"",description:"仅为中国大陆工商认证并且使用人民币在线支付的企业开具发票，开票金额需至少1000元且为整数，消费不足1000元可后续累积足够金额再一次性开具发票。"},{default:s(()=>[c(o(p),{onSuccess:n}),c(o(l),null,{"toolbar-actions":s(()=>[c(o(k),{class:"mr-2",size:"large",type:"primary",onClick:f},{default:s(()=>i[0]||(i[0]=[d(" 申请开票 ")])),_:1})]),status:s(({row:a})=>[c(o(x),{color:a.status===0?"red":"success"},{default:s(()=>[d(C(a.status===0?"开票中":"已开票"),1)]),_:2},1032,["color"])]),type:s(({row:a})=>[N("span",null,C(a.type===0?"普票":"专票"),1)]),operation:s(({row:a})=>[a.status===1?(_(),h(o(x),{key:0,size:"small"},{default:s(()=>i[1]||(i[1]=[d(" 联系客服领取 ")])),_:1})):w("",!0),a.status===0?(_(),h(o(k),{key:1,class:"ml-1",size:"small",type:"link",onClick:j=>t(a)},{default:s(()=>i[2]||(i[2]=[d(" 撤销 ")])),_:2},1032,["onClick"])):w("",!0)]),_:1})]),_:1}))}});export{J as default};
